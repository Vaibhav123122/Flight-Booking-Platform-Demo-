<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Flight Booking System</title>
<style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            overflow-x: hidden;
        }

        .container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            max-width: 500px;
            width: 100%;
            opacity: 0;
            transform: scale(0.8);
            animation: containerAppear 1s ease-out 3s forwards;
        }

        @keyframes containerAppear {
            0% {
                opacity: 0;
                transform: scale(0.8);
            }
            100% {
                opacity: 1;
                transform: scale(1);
            }
        }

        /* Animated Airplane */
        .animated-plane {
            position: fixed;
            font-size: 60px;
            z-index: 2000;
            pointer-events: none;
            left: -100px;
            bottom: -100px;
            transform: rotate(45deg);
            animation: flyPath 3s ease-in-out forwards;
        }

        @keyframes flyPath {
            0% {
                left: -100px;
                bottom: -100px;
                transform: rotate(45deg) scale(1);
                opacity: 1;
            }
            20% {
                left: 50%;
                bottom: 50%;
                transform: rotate(180deg) scale(1.2);
                opacity: 1;
            }
            40% {
                left: 80%;
                bottom: 70%;
                transform: rotate(270deg) scale(1.1);
                opacity: 1;
            }
            60% {
                left: 50%;
                bottom: 90%;
                transform: rotate(360deg) scale(1);
                opacity: 1;
            }
            80% {
                left: 20%;
                bottom: 70%;
                transform: rotate(405deg) scale(0.9);
                opacity: 1;
            }
            95% {
                left: 50%;
                bottom: 50%;
                transform: rotate(450deg) scale(0.5);
                opacity: 0.8;
            }
            100% {
                left: 50%;
                bottom: 50%;
                transform: rotate(450deg) scale(0.3);
                opacity: 0;
            }
        }

        .hackathon-title {
            text-align: center;
            color: #333;
            margin-bottom: 15px;
            font-size: 1.2rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 2px;
            background: linear-gradient(45deg, #e74c3c, #f39c12);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            opacity: 0;
            transform: translateY(-20px);
            animation: popIn 0.8s ease-out 3.5s forwards;
        }

        @keyframes popIn {
            0% {
                opacity: 0;
                transform: translateY(-20px) scale(0.8);
            }
            50% {
                transform: translateY(-10px) scale(1.1);
            }
            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
            font-size: 2rem;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            opacity: 0;
            transform: translateY(-20px);
            animation: titleAppear 1s ease-out 4s forwards;
            position: relative;
        }

        @keyframes titleAppear {
            0% {
                opacity: 0;
                transform: translateY(-20px) scale(0.8);
            }
            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        /* Plane icon in title with special entrance */
        h1::before {
            content: '✈️';
            margin-right: 10px;
            display: inline-block;
            opacity: 0;
            transform: scale(0) rotate(0deg);
            animation: planeIconAppear 0.8s ease-out 4.2s forwards;
        }

        @keyframes planeIconAppear {
            0% {
                opacity: 0;
                transform: scale(0) rotate(-180deg);
            }
            50% {
                opacity: 1;
                transform: scale(1.5) rotate(0deg);
            }
            100% {
                opacity: 1;
                transform: scale(1) rotate(0deg);
            }
        }

        /* Form elements fade in sequentially */
        .form-group {
            margin-bottom: 20px;
            opacity: 0;
            transform: translateY(20px);
            animation: formElementAppear 0.6s ease-out forwards;
        }

        .form-group:nth-child(1) { animation-delay: 4.5s; }
        .form-group:nth-child(2) { animation-delay: 4.7s; }
        .form-group:nth-child(3) { animation-delay: 4.9s; }
        .form-group:nth-child(4) { animation-delay: 5.1s; }
        .form-group:nth-child(5) { animation-delay: 5.3s; }
        .form-group:nth-child(6) { animation-delay: 5.5s; }
        .form-group:nth-child(7) { animation-delay: 5.7s; }

        @keyframes formElementAppear {
            0% {
                opacity: 0;
                transform: translateY(20px);
            }
            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .submit-btn {
            width: 100%;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 15px;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
            opacity: 0;
            transform: translateY(20px);
            animation: formElementAppear 0.6s ease-out 5.9s forwards;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #555;
            font-weight: 600;
        }

        input, select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s ease;
            background-color: #f8f9fa;
        }

        input:focus, select:focus {
            outline: none;
            border-color: #667eea;
            background-color: white;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.2);
        }

        .required {
            color: #e74c3c;
        }

        .trip-type {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }

        .radio-group {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        input[type="radio"] {
            width: auto;
            margin: 0;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }

        .error-message {
            background-color: #fee;
            border: 1px solid #fcc;
            color: #c33;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            display: none;
        }

        .success-message {
            background-color: #efe;
            border: 1px solid #cfc;
            color: #363;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            display: none;
        }

        .input-error {
            border-color: #e74c3c !important;
            background-color: #ffeaea !important;
        }

        #returningDate {
            display: none;
        }

        .show {
            display: block !important;
        }

        /* Search Popup Modal */
        .search-modal {
            position: fixed;
            top: 0;
            left: 0; 
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
      } 

       .search-modal.show {
          visibility: visible;
          opacity: 1;
      }

        .search-modal-content {
            background: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 400px;
            width: 90%;
            transform: scale(0.7);
            transition: all 0.3s ease;
        }

        .search-modal.show .search-modal-content {
            transform: scale(1);
        }

        .search-spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .search-modal h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.5rem;
        }

        .search-modal p {
            color: #666;
            font-size: 1rem;
            margin-bottom: 20px;
        }

        .search-progress {
            background: #f0f0f0;
            border-radius: 10px;
            height: 8px;
            overflow: hidden;
            margin-top: 20px;
        }

        .search-progress-bar {
            background: linear-gradient(45deg, #667eea, #764ba2);
            height: 100%;
            width: 0%;
            border-radius: 10px;
            transition: width 0.3s ease;
        }

        .flight-results {
            margin-top: 30px;
            display: none;
        }

        .flight-results.show {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .results-header {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            border-radius: 15px 15px 0 0;
            text-align: center;
        }

        .flight-card {
            background: white;
            border: 1px solid #e1e5e9;
            border-top: none;
            padding: 25px;
            transition: all 0.3s ease;
            position: relative;
        }

        .flight-card:last-child {
            border-radius: 0 0 15px 15px;
        }

        .flight-card:hover {
            background: #f8f9ff;
            transform: translateX(5px);
            border-left: 4px solid #667eea;
        }

        .flight-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .airline {
            font-weight: bold;
            color: #333;
            font-size: 18px;
        }

        .price {
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
        }

        .flight-details {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 20px;
            align-items: center;
            margin-bottom: 15px;
        }

        .departure, .arrival {
            text-align: center;
        }

        .time {
            font-size: 20px;
            font-weight: bold;
            color: #333;
        }

        .airport {
            color: #666;
            font-size: 14px;
            margin-top: 5px;
        }

        .flight-path {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }

        .duration {
            font-size: 12px;
            color: #666;
            margin-bottom: 5px;
        }

        .path-line {
            width: 60px;
            height: 2px;
            background: #667eea;
            position: relative;
        }

        .path-line::after {
            content: '✈️';
            position: absolute;
            right: -10px;
            top: -8px;
            font-size: 12px;
        }

        .flight-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 15px;
        }

        .info-item {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 14px;
            color: #666;
        }

        .book-btn {
            background: linear-gradient(45deg, #28a745, #20c997);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            float: right;
        }

        .book-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(40, 167, 69, 0.3);
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
        }

        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        .no-results {
            text-align: center;
            padding: 40px;
            color: #666;
        }

        .search-again-btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 10px;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s ease;
        }

        .search-again-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        /* Vapor trail effect */
        .vapor-trail {
            position: fixed;
            pointer-events: none;
            z-index: 1999;
        }

        .vapor-trail::before {
            content: '';
            position: absolute;
            width: 100px;
            height: 3px;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.8), transparent);
            border-radius: 50px;
            animation: vaporFade 3s ease-out forwards;
        }

        @keyframes vaporFade {
            0% { opacity: 0; width: 0px; }
            20% { opacity: 1; width: 100px; }
            100% { opacity: 0; width: 150px; }
        }
</style>
</head>
<body>

<!-- Animated Airplane -->
<div class="animated-plane">✈️</div>

<div class="container">
<div class="hackathon-title">Codeverse Hackathon Group Project</div>
<h1>✈️ Flight Booking</h1>
<form id="flightForm">
<div class="form-group">
<label>Trip Type:</label>
<div class="trip-type">
<div class="radio-group">
<input checked="" id="oneWay" name="tripType" type="radio" value="oneWay"/>
<label for="oneWay">One Way</label>
</div>
<div class="radio-group">
<input id="roundTrip" name="tripType" type="radio" value="roundTrip"/>
<label for="roundTrip">Round Trip</label>
</div>
</div>
</div>
<div class="form-group">
<label for="from">From <span class="required">*</span></label>
<select id="from" name="from" required="">
<option value="">Select departure airport</option>
<optgroup label="Indian Airports (Recommended)">
<option value="DEL">Delhi (DEL) - Indira Gandhi International</option>
<option value="BOM">Mumbai (BOM) - Chhatrapati Shivaji</option>
<option value="BLR">Bangalore (BLR) - Kempegowda International</option>
<option value="MAA">Chennai (MAA) - Chennai International</option>
<option value="CCU">Kolkata (CCU) - Netaji Subhash Chandra Bose</option>
<option value="HYD">Hyderabad (HYD) - Rajiv Gandhi International</option>
<option value="AMD">Ahmedabad (AMD) - Sardar Vallabhbhai Patel</option>
<option value="COK">Kochi (COK) - Cochin International</option>
<option value="GOI">Goa (GOI) - Goa International</option>
<option value="PNQ">Pune (PNQ) - Pune Airport</option>
<option value="JAI">Jaipur (JAI) - Jaipur International</option>
<option value="LKO">Lucknow (LKO) - Chaudhary Charan Singh</option>
</optgroup>
<optgroup label="International Airports">
<option value="JFK">New York (JFK) - John F. Kennedy</option>
<option value="LAX">Los Angeles (LAX) - Los Angeles International</option>
<option value="LHR">London (LHR) - Heathrow</option>
<option value="DXB">Dubai (DXB) - Dubai International</option>
<option value="SIN">Singapore (SIN) - Changi Airport</option>
<option value="NRT">Tokyo (NRT) - Narita International</option>
<option value="CDG">Paris (CDG) - Charles de Gaulle</option>
<option value="FRA">Frankfurt (FRA) - Frankfurt Airport</option>
<option value="AMS">Amsterdam (AMS) - Schiphol</option>
<option value="ICN">Seoul (ICN) - Incheon International</option>
</optgroup>
</select>
</div>
<div class="form-group">
<label for="to">To <span class="required">*</span></label>
<select id="to" name="to" required="">
<option value="">Select destination airport</option>
<optgroup label="Indian Airports (Recommended)">
<option value="DEL">Delhi (DEL) - Indira Gandhi International</option>
<option value="BOM">Mumbai (BOM) - Chhatrapati Shivaji</option>
<option value="BLR">Bangalore (BLR) - Kempegowda International</option>
<option value="MAA">Chennai (MAA) - Chennai International</option>
<option value="CCU">Kolkata (CCU) - Netaji Subhash Chandra Bose</option>
<option value="HYD">Hyderabad (HYD) - Rajiv Gandhi International</option>
<option value="AMD">Ahmedabad (AMD) - Sardar Vallabhbhai Patel</option>
<option value="COK">Kochi (COK) - Cochin International</option>
<option value="GOI">Goa (GOI) - Goa International</option>
<option value="PNQ">Pune (PNQ) - Pune Airport</option>
<option value="JAI">Jaipur (JAI) - Jaipur International</option>
<option value="LKO">Lucknow (LKO) - Chaudhary Charan Singh</option>
</optgroup>
<optgroup label="International Airports">
<option value="JFK">New York (JFK) - John F. Kennedy</option>
<option value="LAX">Los Angeles (LAX) - Los Angeles International</option>
<option value="LHR">London (LHR) - Heathrow</option>
<option value="DXB">Dubai (DXB) - Dubai International</option>
<option value="SIN">Singapore (SIN) - Changi Airport</option>
<option value="NRT">Tokyo (NRT) - Narita International</option>
<option value="CDG">Paris (CDG) - Charles de Gaulle</option>
<option value="FRA">Frankfurt (FRA) - Frankfurt Airport</option>
<option value="AMS">Amsterdam (AMS) - Schiphol</option>
<option value="ICN">Seoul (ICN) - Incheon International</option>
</optgroup>
</select>
</div>
<div class="form-group">
<label for="departureDate">Departure Date <span class="required">*</span></label>
<input id="departureDate" name="departureDate" required="" type="date"/>
</div>
<div class="form-group" id="returningDate">
<label for="returnDate">Return Date</label>
<input id="returnDate" name="returnDate" type="date"/>
</div>
<div class="form-group">
<label for="passengers">Number of Passengers <span class="required">*</span></label>
<select id="passengers" name="passengers" required="">
<option value="">Select passengers</option>
<option value="1">1 Passenger</option>
<option value="2">2 Passengers</option>
<option value="3">3 Passengers</option>
<option value="4">4 Passengers</option>
<option value="5">5 Passengers</option>
<option value="6">6 Passengers</option>
<option value="7">7 Passengers</option>
<option value="8">8 Passengers</option>
<option value="9">9+ Passengers</option>
</select>
</div>
<div class="form-group">
<label for="class">Travel Class <span class="required">*</span></label>
<select id="class" name="class" required="">
<option value="">Select class</option>
<option value="economy">Economy</option>
<option value="premium-economy">Premium Economy</option>
<option value="business">Business</option>
<option value="first">First Class</option>
</select>
</div>
<button class="submit-btn" type="submit">Search Flights</button>
<div class="error-message" id="errorMessage"></div>
<div class="success-message" id="successMessage"></div>
</form>
<div class="flight-results" id="flightResults">
<div class="results-header">
<h2 id="resultsTitle">Available Flights</h2>
<p id="resultsSubtitle"></p>
</div>
<div id="flightsList"></div>
</div>
</div>
<!-- Search Modal -->
<div class="search-modal" id="searchModal">
<div class="search-modal-content">
<div class="search-spinner"></div>
<h3>Searching Flights</h3>
<p>Finding the best deals for you...</p>
<div class="search-progress">
<div class="search-progress-bar" id="progressBar"></div>
</div>
</div>
</div>

<script>
// Global functions for onclick handlers
function bookFlight(airline, flightNumber, price) {
    const confirmation = confirm(`Confirm booking for ${airline} ${flightNumber} at ₹${price.toLocaleString()}?`);
    
    if (confirmation) {
        // Generate booking reference
        const bookingRef = 'BK' + Math.random().toString(36).substr(2, 8).toUpperCase();
        
        showSuccess(`
            🎉 Booking Confirmed!<br>
            <strong>Booking Reference:</strong> ${bookingRef}<br>
            <strong>Flight:</strong> ${airline} ${flightNumber}<br>
            <strong>Amount:</strong> ₹${price.toLocaleString()}<br>
            <br>
            You will receive a confirmation email shortly with your e-ticket.
        `);
        
        // Scroll to success message
        document.getElementById('successMessage').scrollIntoView({ 
            behavior: 'smooth',
            block: 'center'
        });
    }
}

function showError(message) {
    const errorDiv = document.getElementById('errorMessage');
    const successDiv = document.getElementById('successMessage');
    errorDiv.innerHTML = message;
    errorDiv.style.display = 'block';
    successDiv.style.display = 'none';
    errorDiv.scrollIntoView({ behavior: 'smooth' });
}

function showSuccess(message) {
    const errorDiv = document.getElementById('errorMessage');
    const successDiv = document.getElementById('successMessage');
    successDiv.innerHTML = message;
    successDiv.style.display = 'block';
    errorDiv.style.display = 'none';
    successDiv.scrollIntoView({ behavior: 'smooth' });
}

function clearErrors() {
    document.getElementById('errorMessage').style.display = 'none';
    document.getElementById('successMessage').style.display = 'none';
    
    // Remove error styling from inputs
    const inputs = document.querySelectorAll('.input-error');
    inputs.forEach(input => {
        input.classList.remove('input-error');
    });
}

function showSearchModal() {
    const modal = document.getElementById('searchModal');
    const progressBar = document.getElementById('progressBar');
    
    modal.classList.add('show');
    progressBar.style.width = '0%';
    
    // Animate progress bar
    let progress = 0;
    const progressInterval = setInterval(() => {
        progress += Math.random() * 15;
        if (progress > 95) progress = 95;
        progressBar.style.width = progress + '%';
    }, 200);
    
    return progressInterval;
}

function hideSearchModal() {
    const modal = document.getElementById('searchModal');
    modal.classList.remove('show');
}

document.addEventListener('DOMContentLoaded', function () {
    console.log('DOM loaded, initializing...');
    
    // Set minimum date to today
    const today = new Date().toISOString().split('T')[0];
    document.getElementById('departureDate').setAttribute('min', today);
    document.getElementById('returnDate').setAttribute('min', today);

    // Handle trip type change
    const tripTypeRadios = document.querySelectorAll('input[name="tripType"]');
    const returningDateDiv = document.getElementById('returningDate');
    const returnDateInput = document.getElementById('returnDate');

    tripTypeRadios.forEach(radio => {
        radio.addEventListener('change', function() {
            console.log('Trip type changed to:', this.value);
            if (this.value === 'roundTrip') {
                returningDateDiv.classList.add('show');
                returnDateInput.required = true;
            } else {
                returningDateDiv.classList.remove('show');
                returnDateInput.required = false;
                returnDateInput.value = '';
            }
        });
    });

    // Update return date minimum when departure date changes
    document.getElementById('departureDate').addEventListener('change', function() {
        const departureDate = this.value;
        document.getElementById('returnDate').setAttribute('min', departureDate);
        
        // Clear return date if it's before new departure date
        const returnDate = document.getElementById('returnDate').value;
        if (returnDate && returnDate < departureDate) {
            document.getElementById('returnDate').value = '';
        }
    });

    // Prevent selecting same airport for from and to
    document.getElementById('from').addEventListener('change', function() {
        const fromValue = this.value;
        const toSelect = document.getElementById('to');
        const toValue = toSelect.value;
        
        if (fromValue && fromValue === toValue) {
            toSelect.value = '';
            showError('Departure and destination airports cannot be the same.');
        }
    });

    document.getElementById('to').addEventListener('change', function() {
        const toValue = this.value;
        const fromSelect = document.getElementById('from');
        const fromValue = fromSelect.value;
        
        if (toValue && toValue === fromValue) {
            this.value = '';
            showError('Departure and destination airports cannot be the same.');
        }
    });

    // Form submission handler
    document.getElementById('flightForm').addEventListener('submit', function(e) {
        e.preventDefault();
        console.log('Form submitted');
        
        // Clear previous error states
        clearErrors();
        
        // Get form data
        const formData = new FormData(this);
        const tripType = formData.get('tripType');
        const from = formData.get('from');
        const to = formData.get('to');
        const departureDate = formData.get('departureDate');
        const returnDate = formData.get('returnDate');
        const passengers = formData.get('passengers');
        const travelClass = formData.get('class');
        
        console.log('Form data:', { tripType, from, to, departureDate, returnDate, passengers, travelClass });
        
        // Validation
        let errors = [];
        let hasErrors = false;
        
        if (!from) {
            errors.push('Please select a departure airport');
            document.getElementById('from').classList.add('input-error');
            hasErrors = true;
        }
        
        if (!to) {
            errors.push('Please select a destination airport');
            document.getElementById('to').classList.add('input-error');
            hasErrors = true;
        }
        
        if (from && to && from === to) {
            errors.push('Departure and destination airports cannot be the same');
            document.getElementById('from').classList.add('input-error');
            document.getElementById('to').classList.add('input-error');
            hasErrors = true;
        }
        
        if (!departureDate) {
            errors.push('Please select a departure date');
            document.getElementById('departureDate').classList.add('input-error');
            hasErrors = true;
        }
        
        if (tripType === 'roundTrip' && !returnDate) {
            errors.push('Please select a return date for round trip');
            document.getElementById('returnDate').classList.add('input-error');
            hasErrors = true;
        }
        
        if (departureDate && returnDate && returnDate < departureDate) {
            errors.push('Return date cannot be before departure date');
            document.getElementById('returnDate').classList.add('input-error');
            hasErrors = true;
        }
        
        if (!passengers) {
            errors.push('Please select number of passengers');
            document.getElementById('passengers').classList.add('input-error');
            hasErrors = true;
        }
        
        if (!travelClass) {
            errors.push('Please select travel class');
            document.getElementById('class').classList.add('input-error');
            hasErrors = true;
        }
        
        // Show errors or start search
        if (hasErrors) {
            console.log('Validation errors:', errors);
            showError(errors.join('<br>'));
        } else {
            console.log('Validation passed, starting search...');
            searchFlights(formData);
        }
    });

    function searchFlights(formData) {
        console.log('Starting flight search...');
        const resultsDiv = document.getElementById('flightResults');
        const flightsList = document.getElementById('flightsList');
        const resultsTitle = document.getElementById('resultsTitle');
        const resultsSubtitle = document.getElementById('resultsSubtitle');
        
        // Get form values
        const from = formData.get('from');
        const to = formData.get('to');
        const departureDate = formData.get('departureDate');
        const passengers = formData.get('passengers');
        const travelClass = formData.get('class');
        const tripType = formData.get('tripType');
        
        // Get airport names
        const fromText = document.getElementById('from').selectedOptions[0].text;
        const toText = document.getElementById('to').selectedOptions[0].text;
        
        // Update results header
        resultsTitle.textContent = `${fromText.split(' ')[0]} → ${toText.split(' ')[0]}`;
        resultsSubtitle.textContent = `${departureDate} • ${passengers} passenger(s) • ${travelClass.charAt(0).toUpperCase() + travelClass.slice(1)}`;
        
        // Show search modal
        const progressInterval = showSearchModal();
        
        // Simulate search delay
        setTimeout(() => {
            console.log('Generating flights...');
            const flights = generateFlights(from, to, departureDate, travelClass);
            
            // Complete progress bar
            document.getElementById('progressBar').style.width = '100%';
            
            setTimeout(() => {
                // Hide modal and show results
                hideSearchModal();
                clearInterval(progressInterval);
                displayFlights(flights, fromText, toText);
                resultsDiv.classList.add('show');
                
                // Scroll to results
                setTimeout(() => {
                    resultsDiv.scrollIntoView({ behavior: 'smooth' });
                }, 300);
            }, 500);
        }, 2000);
    }

    function generateFlights(from, to, departureDate, travelClass) {
        const airlines = [
            { name: 'IndiGo', code: '6E' },
            { name: 'Air India', code: 'AI' },
            { name: 'SpiceJet', code: 'SG' },
            { name: 'Vistara', code: 'UK' },
            { name: 'GoAir', code: 'G8' },
            { name: 'AirAsia India', code: 'I5' }
        ];
        
        const flights = [];
        const numFlights = Math.floor(Math.random() * 4) + 3; // 3-6 flights
        
        for (let i = 0; i < numFlights; i++) {
            const airline = airlines[Math.floor(Math.random() * airlines.length)];
            const departureTime = generateTime();
            const duration = Math.floor(Math.random() * 4) + 1; // 1-4 hours
            const arrivalTime = addHoursToTime(departureTime, duration);
            
            let basePrice = Math.floor(Math.random() * 15000) + 5000; // 5000-20000
            
            // Adjust price based on class
            switch(travelClass) {
                case 'premium-economy':
                    basePrice *= 1.5;
                    break;
                case 'business':
                    basePrice *= 3;
                    break;
                case 'first':
                    basePrice *= 5;
                    break;
            }
            
            flights.push({
                airline: airline.name,
                flightNumber: `${airline.code}${Math.floor(Math.random() * 9000) + 1000}`,
                departure: departureTime,
                arrival: arrivalTime,
                duration: `${duration}h ${Math.floor(Math.random() * 60)}m`,
                price: Math.floor(basePrice),
                stops: Math.random() > 0.7 ? '1 Stop' : 'Non-stop',
                baggage: travelClass === 'economy' ? '15 kg' : '25 kg',
                refundable: Math.random() > 0.5
            });
        }
        
        // Sort by price
        return flights.sort((a, b) => a.price - b.price);
    }

    function generateTime() {
        const hours = Math.floor(Math.random() * 12) + 6; // 6 AM to 6 PM
        const minutes = Math.floor(Math.random() * 4) * 15; // 0, 15, 30, 45
        return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}`;
    }

    function addHoursToTime(time, hours) {
        const [h, m] = time.split(':').map(Number);
        const newHours = (h + hours) % 24;
        return `${newHours.toString().padStart(2, '0')}:${m.toString().padStart(2, '0')}`;
    }

    function displayFlights(flights, fromText, toText) {
        console.log('Displaying flights:', flights);
        const flightsList = document.getElementById('flightsList');
        
        if (flights.length === 0) {
            flightsList.innerHTML = `
                <div class="no-results">
                    <h3>No flights found</h3>
                    <p>Try adjusting your search criteria</p>
                    <button class="search-again-btn" onclick="document.getElementById('flightResults').classList.remove('show')">
                        Search Again
                    </button>
                </div>
            `;
            return;
        }
        
        const flightsHTML = flights.map(flight => `
            <div class="flight-card">
                <div class="flight-header">
                    <div class="airline">${flight.airline} ${flight.flightNumber}</div>
                    <div class="price">₹${flight.price.toLocaleString()}</div>
                </div>
                
                <div class="flight-details">
                    <div class="departure">
                        <div class="time">${flight.departure}</div>
                        <div class="airport">${fromText.split(' ')[0]}</div>
                    </div>
                    
                    <div class="flight-path">
                        <div class="duration">${flight.duration}</div>
                        <div class="path-line"></div>
                        <div style="font-size: 12px; color: #666; margin-top: 5px;">${flight.stops}</div>
                    </div>
                    
                    <div class="arrival">
                        <div class="time">${flight.arrival}</div>
                        <div class="airport">${toText.split(' ')[0]}</div>
                    </div>
                </div>
                
                <div class="flight-info">
                    <div class="info-item">
                        <span>🧳</span>
                        <span>Baggage: ${flight.baggage}</span>
                    </div>
                    <div class="info-item">
                        <span>${flight.refundable ? '✅' : '❌'}</span>
                        <span>${flight.refundable ? 'Refundable' : 'Non-refundable'}</span>
                    </div>
                    <button class="book-btn" onclick="bookFlight('${flight.airline}', '${flight.flightNumber}', ${flight.price})">
                        Book Now
                    </button>
                </div>
            </div>
        `).join('');
        
        flightsList.innerHTML = flightsHTML;
    }
});
</script>
</body>
</html>